<!DOCTYPE html>
<html lang="es" data-theme="auto">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
  <link rel="stylesheet" href="css/Dashboard.css">
</head>

<body>

  <nav class="container-fluid nav-container">
  <div class="navbar-top">
    <div class="logo">
      <img src="img/finder3.png" alt="Logo">
    </div>
    <a href="MyPerfil.html" class="profile-icon" aria-label="Perfil">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-user-icon">
        <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
        <circle cx="12" cy="7" r="4" />
      </svg>
    </a>
  </div>
</nav>

<main class="wrap">
    <section id="listings" class="stack"></section>
  </main>


  <nav class="mobile-nav">
    <a href="Dashboard.html" class="nav-item active" data-tab="home">
      <i class="fas fa-home"></i>
      <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house-icon lucide-house"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg></span>
    </a>
    <a href="MisReseñas.html" class="nav-item" data-tab="search">
      <i class="fas fa-search"></i>
      <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star-icon lucide-star"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"/></svg></span>
    </a>

    <a href="Reservas.html" class="nav-item" data-tab="reserva">
      <i class="fas fa-user"></i>
      <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-marked-icon lucide-book-marked"><path d="M10 2v8l3-3 3 3V2"/><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"/></svg></span>
    </a>
  </nav>

 <section class="map-section">
    <div class="map-card">
      <h2><svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map-pin-icon lucide-map-pin"><path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/><circle cx="12" cy="10" r="3"/></svg> Ubicación de nuestro Hotel</h2>
      <div class="map-container">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3876.4188734787654!2d-89.237793!3d13.693062!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f63302ff889c5c5%3A0xcf157d983b46f169!2sBarcel%C3%B3%20San%20Salvador!5e0!3m2!1ses-419!2ssv!4v1756266204332!5m2!1ses-419!2ssv" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
      <a href="https://www.google.com/maps/place/Barcel%C3%B3+San+Salvador/@13.693062,-89.237793,17z/data=!3m1!4b1!4m9!3m8!1s0x8f63302ff889c5c5:0xcf157d983b46f169!5m2!4m1!1i2!8m2!3d13.693062!4d-89.237793!16s%2Fg%2F122x82m7?entry=ttu&g_ep=EgoyMDI1MDgyNC4wIKXMDSoASAFQAw%3D%3D" target="_blank" class="btn-directions">Cómo llegar</a>
    </div>
  </section>

  <!-- Modal Reserva-->
<div id="mf-reserva" class="mf-modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="mf-backdrop" data-mf-close></div>

  <div class="mf-sheet">
    <!-- Header -->
    <header class="mf-header">
      <button class="mf-back" type="button" aria-label="Volver" data-mf-prev hidden>←</button>
      <h1 id="mf-title">Revisa y continúa</h1>
      <button class="mf-close" type="button" aria-label="Cerrar" data-mf-close>×</button>
    </header>

    <!-- Formulario -->
    <form id="mf-form" novalidate>
      
      <!-- Paso 1: Revisa -->
<section class="mf-step mf-active" data-mf-step="1">
  <div class="mf-card">
    <div class="mf-card-row">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-hotel-icon lucide-hotel"><path d="M10 22v-6.57"/><path d="M12 11h.01"/><path d="M12 7h.01"/><path d="M14 15.43V22"/><path d="M15 16a5 5 0 0 0-6 0"/><path d="M16 11h.01"/><path d="M16 7h.01"/><path d="M8 11h.01"/><path d="M8 7h.01"/><rect x="4" y="2" width="16" height="20" rx="2"/></svg>
      <div class="mf-card-col">
        <h2 id="mf-room-title" class="mf-h2">Habitación</h2>
        <div class="mf-subtle"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star-icon lucide-star"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"/></svg> Favorito entre huéspedes</div>
      </div>
    </div>

    <hr class="mf-divider">

    <!-- DETALLES VIAJE como botón -->
    <div class="mf-row">
      <div>
        <div class="mf-label">Detalles del viaje</div>
        <button id="mf-trip-btn" class="mf-trip-btn" type="button" aria-haspopup="dialog" aria-expanded="false">
          Selecciona fechas
        </button>

    <!-- Inputs ocultos que viajan en el submit -->
    <input type="hidden" name="checkin" id="mf-checkin">
    <input type="hidden" name="checkout" id="mf-checkout">

    <hr class="mf-divider">

    <div class="mf-row">
      <div>
        <div class="mf-label">Precio total</div>
        <div id="mf-room-price" class="mf-text">$0.00</div>

    <hr class="mf-divider">

    <div>
      <div class="mf-label">Cancelación gratuita</div>
      <div class="mf-text">
        Si cancelas antes de la fecha límite recibes reembolso total.
        <a class="mf-link" href="#">Política completa</a>
      </div>
    </div>
  </div>
</section>

<!-- Panel de fechas dentro del modal -->
<div id="mf-trip-panel" class="mf-trip-panel" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="mf-trip-sheet">
    <header class="mf-trip-header">
      <h3>Fechas del viaje</h3>
      <button class="mf-trip-close" type="button" aria-label="Cerrar">×</button>
    </header>
    <div class="mf-trip-body">
      <label class="mf-field">
        <span class="mf-label">Check-in</span>
        <input type="date" id="mf-input-checkin">
      </label>
      <label class="mf-field">
        <span class="mf-label">Check-out</span>
        <input type="date" id="mf-input-checkout">
      </label>
      <p class="mf-trip-hint" id="mf-trip-hint"></p>
    </div>
    <footer class="mf-trip-footer">
      <button id="mf-trip-save" class="mf-cta" type="button">Guardar fechas</button>
    </footer>
  </div>
</div>


      <!-- Paso 2: Método de pago -->
      <section class="mf-step" data-mf-step="2">
        <h2 class="mf-h1">Agrega un método de pago</h2>

        <label class="mf-option">
          <input type="radio" name="metodoPago" value="tarjeta" required>
          <span class="mf-option-body">
            <span class="mf-option-title">Tarjeta de crédito o débito</span>
            <span class="mf-option-badges">VISA • MASTERCARD • AMEX • DISCOVER</span>
          </span>
          <span class="mf-radio"></span>
        </label>

      </section>

      <!-- Paso 3: Datos de tarjeta -->
      <section class="mf-step" data-mf-step="3">
        <h2 class="mf-h1">Agrega los datos de la tarjeta</h2>

        <label class="mf-field">
          <input type="text" name="cardNumber" inputmode="numeric" placeholder="Número de tarjeta" required>
        </label>

        <div class="mf-grid2">
          <label class="mf-field">
            <input type="text" name="cardExp" inputmode="numeric" placeholder="Vencimiento MM/AA" required>
          </label>
          <label class="mf-field">
            <input type="text" name="cardCvv" inputmode="numeric" placeholder="Código CVV" required>
          </label>
        </div>

        <label class="mf-field">
          <input type="text" name="postal" inputmode="numeric" placeholder="Código postal" required>
        </label>

        <label class="mf-field">
          <select name="country" required>
            <option value="">País/región</option>
            <option value="SV">El Salvador</option>
          </select>
        </label>
      </section>

      <section class="mf-step" data-mf-step="4">
  <h2 class="mf-h1">Datos del huésped</h2>
  <hr class="mf-divider">


  <label class="mf-field">
    <input type="text" name="nombreHuesped" placeholder="Nombre completo (a nombre de quién)" required>
  </label>

  <label class="mf-field">
    <input type="tel" name="telefono" inputmode="tel" placeholder="Número de teléfono" required>
  </label>

  <label class="mf-field">
    <input type="text" name="dui" inputmode="numeric" placeholder="DUI (00000000-0)" required>
  </label>

  <label class="mf-field">
    <input type="email" name="email" autocomplete="email" placeholder="Correo electrónico" required>
  </label>
</section>


<!-- Modal de mas informacion -->
<div id="roomModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2 id="modal-title"></h2>
    <p id="modal-desc"></p>
    <p id="modal-price"></p>

    <!-- Sección reseñas -->
    <div id="modal-reviews">
      <h3>Reseñas ⭐</h3>
      <ul id="reviews-list"></ul>
    </div>
  </div>
</div>


      <!-- Footer -->
      <footer class="mf-footer">
        <div class="mf-progress">
          <span class="mf-bar mf-active"></span>
          <span class="mf-bar"></span>
          <span class="mf-bar"></span>
          <span class="mf-bar"></span>
        </div>
        <button id="mf-next" class="mf-cta" type="button">Siguiente</button>
      </footer>
    </form>
  </div>
</div>

  <script src="js/Dashboard.js"></script>
  <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
</script>
<script type="text/javascript">
   (function(){
      emailjs.init({
        publicKey: "4PmIu95_alYkJpzjO",
      });
   })();
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script type="module">
  import { initDashboardController } from "./js/controllers/dashboardController.js";

  // Esto arranca tu lógica: 
  // llama al service, obtiene las habitaciones y manda a pintar la vista.
  initDashboardController();
</script>

<script type="module">
  import { obtenerHabitacionesDashboard } from "./js/services/servicesDashboard.js";

  async function init(){
    const data = await obtenerHabitacionesDashboard();
    const container = document.querySelector("#listings");

    container.innerHTML = data.map(h => `
      <div class="card">
        <h3>${h.title}</h3>
        <p>${h.meta}</p>
        <p><strong>$${h.price}</strong> ${h.priceNote}</p>
      </div>
    `).join("");
  }

  init();
</script>
</body>
</html>